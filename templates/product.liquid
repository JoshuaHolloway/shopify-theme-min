{{ "https://cdnjs.cloudflare.com/ajax/libs/mustache.js/3.0.1/mustache.min.js" | script_tag }}
{{ "https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js" | script_tag }}

{% assign current_variant = product.selected_or_first_available_variant %}
{% assign featured_image = current_variant.featured_image | default: product.featured_image %}
<div class="flex-container">
    <div class="product">
        <h1>{{ product.title }}</h1>
        <img src="{{ featured_image | img_url: 'large' }}" alt="{{ featured_image.alt | escape }}" id="ProductPhotoImg">


        <!-- <form action="/cart/add" method="post" enctype="multipart/form-data" id="AddToCartForm"> -->
        <form id="AddToCartForm">
            <select name="id" id="productSelect">
                {% for variant in product.variants %}
                    {% if variant.available %}
                        <option value="{{ variant.id }}">
                            {{ variant.title }} - {{ variant.price | money_with_currency }}
                        </option>
                    {% else %}
                        <option disabled="disabled">
                            {{ variant.title }} - sold out
                        </option>
                    {% endif %}
                {% endfor %}
            </select>

            {{ current_variant.price | money }}

            <label for="Quantity">quantity</label>
            <input type="number" id="Quantity" name="quantity" value="1" min="1">

            <button type="submit" name="add" id="AddToCart">Add to cart</button>

        </form>
        <div>{{ product.description }}</div>
        {% for image in product.images %}
            <a href="{{ image.src | img_url: 'large' }}">
                <img src="{{ image.src | img_url: 'compact' }}" alt="{{ image.alt | escape }}">
            </a>
        {% endfor %}
    </div>


    <div class="side-cart">
        <h2>Cart</h2>
        <div id="cart-goes-here"></div>
    </div>
</div>










<script id="template" type="text/html">
    <div>
    <div class="items">
        <%#items%>
        <div class="item" data-variant-id="<%id%>">
            <div class="row cart__row">
                <div class="col-md-4 col-sm-4 col-4">
                    <img alt="" src="<%featured_image.url%>">
                </div>
                <div class="col-md-8 col-sm-8 col-8">
                    <p>
                        <a href="<%url%>" class="cart__product-name">
                            <span><%title%></span>
                        </a>
                        <%#options_with_values%><span class="cart__product-meta"><%name%>: <%value%></span><%/options_with_values%>
                        <span class="cart__product-meta" >$<%price%></span>
                    </p>
                    <div class="row--full display-table">
                        <div class="row__item display-table-cell one-half">
                            <div class="cart__qty">
                                <button type="button" class="x-button cart__qty-adjust cart__qty--minus">
                                    <span aria-hidden="true" class="icon icon-minus"></span>
                                    <span aria-hidden="true" class="fallback-text">−</span>
                                </button>
                                <input type="text" pattern="[0-9]*" class="cart__qty-num" value="<%quantity%>">
                                <button type="button" class="x-button cart__qty-adjust cart__qty--plus">
                                    <span aria-hidden="true" class="icon icon-plus"></span>
                                    <span aria-hidden="true" class="fallback-text">+</span>
                                </button>
                            </div>
                        </div>
                        <div class="row__item display-table-cell one-half text-right"><span class="variant-price au">$<%line_price%></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <%/items%>
        </div>
        <div class="cart__footer">
            <div class="cart__footer--empty">
                <!---->
            </div>
            <div class="row cart__footer-extra">
                <div class="col-md-6 col-sm-6 col-xs-6">
                    <p class="x-p cart__pricing-title">Shipping</p>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-6 text-right">
                    <p class="x-p cart__pricing-cost"><strong>FREE</strong></p>
                </div>
                <!---->
            </div>
            <div class="row cart__footer-total">
                <div class="col-md-6 col-sm-6 col-xs-6">
                    <p class="x-p cart__pricing-total-title">Subtotal</p>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-6 text-right">
                    <p class="x-p cart__pricing-total-cost"><strong>$<%total_price%></strong></p>
                </div>
            </div>
            <a href="/checkout" id="checkoutButton" class="btn btn--secondary btn--full cart__cta">
                Check Out
            </a>
        </div>
    </div>
</script>










<script id="lineItemTemplate" type="text/html">
    <div class="item" data-variant-id="<%id%>">
        <div class="row cart__row">
            <div class="col-md-4 col-sm-4 col-4">
                <img alt="" src="<%featured_image.url%>">
            </div>
            <div class="col-md-8 col-sm-8 col-8">
                <p>
                    <a href="#" class="cart__product-name">
                        <span><%title%></span>
                    </a>
                    <%#options_with_values%><span class="cart__product-meta"><%name%>: <%value%></span><%/options_with_values%>
                    <span class="cart__product-meta" >$<%price%></span>
                </p>
                <div class="row--full display-table">
                    <div class="row__item display-table-cell one-half">
                        <div class="cart__qty">
                            <button type="button" class="x-button cart__qty-adjust cart__qty--minus">
                                <span aria-hidden="true" class="icon icon-minus"></span>
                                <span aria-hidden="true" class="fallback-text">−</span>
                            </button>
                            <input type="text" pattern="[0-9]*" class="cart__qty-num" value="<%quantity%>">
                            <button type="button" class="x-button cart__qty-adjust cart__qty--plus">
                                <span aria-hidden="true" class="icon icon-plus"></span>
                                <span aria-hidden="true" class="fallback-text">+</span>
                            </button>
                        </div>
                    </div>
                    <div class="row__item display-table-cell one-half text-right"><span class="variant-price au">$<%line_price%></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>

{{ 'product.js' | asset_url | script_tag }}
{{ 'product.scss.css' | asset_url | stylesheet_tag }}